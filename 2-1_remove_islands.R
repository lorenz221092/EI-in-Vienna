# script:  2-1_treat_islands
# purpose: source this script to remove islands
# project: environmental ineq paper
# author:  lorenz
##########################################################################################
##########################################################################################




# plot the  grid cells with labels in order to identify islands
tm_shape(shp) +
  tm_borders(col = "black", alpha = 0.7) +
  tm_text("IDshort", size = 1/7, col = "red")


                                #### islands south of donau ####
island_ids <- c(988, 1101, 1013, 1095, 1098, 1012, 1094, 1002, 977, 937, 943, 942, 944,
                933, 939, 941, 956, 932, 938, 507, 421, 481, 482, 1172, 3008, 1213, 1218,
                3048, 3248, 3272, 3498, 3560, 3627, 3649, 7265, 3646, 3663, 3662, 3665, 
                4408, 4381, 4399, 4380, 4398, 4375, 4403, 4396, 4402, 5716, 4393, 5707, 
                4292, 4224, 4229, 4249, 4257, 5901, 5270, 2137, 1752, 1753, 93, 198, 204,
                206, 177, 736, 739, 748, 740,
                
                               ### islands north of donau ####      
                7351, 7793, 7795, 7786, 7788, 7801, 7821, 7820, 7785, 7798, 7806, 7807,
                7784, 6655, 6675, 6680, 6673, 6677, 6679, 6672, 6572, 6641, 6648, 4902,
                4865, 4868, 6535, 6531, 6524, 6526, 6521, 6525, 6518, 6517, 6995, 7010,
                6994, 7009, 6990, 6991, 7008, 7012, 6979, 6999, 7004, 6977, 6997, 6970, 
                6976, 6996, 6852, 6854, 6875, 6851, 6853, 6849, 6850, 6868, 7209, 7206,
                7205, 7178, 6274, 6239, 6127, 7810, 6765, 6830, 6731, 6795, 6799, 6728,
                6730, 6794, 6725, 6727, 6792, 6724, 6726, 6791
                
                )



# remove islands defined above
shp <- shp[!shp$IDshort %in% island_ids, ]


# who is left?
(n_cells_4    <- nrow(shp))                 
(n_pop_4      <- sum(shp$Population))       
(perc_cells4  <- n_cells_4*100/n_cells_0)   
(perc_pop4    <- n_pop_4*100/n_pop_1)       


# purge environment
rm(island_ids)
##################end of script###########################################################
##########################################################################################